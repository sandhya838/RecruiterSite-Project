<div class="card rollprofile">
  <div class="card-body">
    <div
      class="alert alert-dismissible fade show alert alert-danger"
      role="alert"
      *ngIf="getTotalPercentage() ? true : false"
    >
      The addition of all management, technical and functional is 100%.
      <button
        type="button"
        class="close"
        data-dismiss="alert"
        aria-label="Close"
      >
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div
      class="alert alert-dismissible fade show alert alert-danger"
      role="alert"
      *ngIf="getTotalOfFuncaional()"
    >
      The addition of all sme, lead consultant and consultant is 100%.
      <button
        type="button"
        class="close"
        data-dismiss="alert"
        aria-label="Close"
      >
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div
      class="alert alert-dismissible fade show alert alert-danger"
      role="alert"
      *ngIf="getTotalOfManagement()"
    >
      The addition of all portfolio, account and project is 100%.
      <button
        type="button"
        class="close"
        data-dismiss="alert"
        aria-label="Close"
      >
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div
      class="alert alert-dismissible fade show alert alert-danger"
      role="alert"
      *ngIf="getTotalOfTechnical()"
    >
      The addition of all architect, techLead and developer is 100%.
      <button
        type="button"
        class="close"
        data-dismiss="alert"
        aria-label="Close"
      >
        <span aria-hidden="true">&times;</span>
      </button>
    </div>

    <div>
      <h5>What role you had done?</h5>
      <small class="mb-2">The addition of all fields is 100%</small>
    </div>
    <form
      [formGroup]="userForm"
      (ngSubmit)="onClick(userForm.value, userForm.valid)"
      novalidate
    >
      <div class="row" formGroupName="roleManagement">
        <div class="col-md-3">
          <div class="form-group">
            <label class="form-check-label" for="Managementscheckbox"
              >Management</label
            >
            <select
              class="form-control"
              name="management"
              id="management"
              formControlName="management"
              (change)="
                onManagementChange(
                  userForm.get('roleManagement.management')!.value,
                  'management'
                );
                getTotalofFields()
              "
            >
              <option value="" selected disabled>Managenent</option>
              <option *ngFor="let item of percentageList" [value]="item">
                {{ item }} %
              </option>
            </select>
            <div
              class="text-danger"
              *ngIf="
                !userForm.get('roleManagement.management')!.valid &&
                (userForm.get('roleManagement.management')!.touched ||
                  userForm.get('roleManagement.management')!.dirty)
              "
            >
              <div *ngIf="userForm.get('roleManagement.management')!.errors">
                <small
                  *ngIf="
                    userForm.get('roleManagement.management')!.errors!.required
                  "
                >
                  This field is required
                </small>
              </div>
            </div>
            <div
              class="text-danger"
              *ngIf="
                !userForm.get('roleManagement.management')!.valid &&
                (userForm.get('roleManagement.management')!.touched ||
                  userForm.get('roleManagement.management')!.dirty)
              "
            >
              <div *ngIf="userForm.get('roleManagement.management')!.errors">
                <small
                  *ngIf="
                    userForm.get('roleManagement.management')!.errors!.required
                  "
                >
                  This field is required
                </small>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3" *ngIf="allFields || onlyManagement">
          <div class="form-group">
            <label for="Portfolio">Portfolio</label>
            <select
              class="form-control"
              name="portfolio"
              id="portfolio"
              formControlName="portfolio"
              (change)="
                onSubFieldTotal(
                  'portfolio',
                  userForm.get('roleManagement.portfolio')!.value
                );
                disabledField('management')
              "
            >
              <option value="" selected disabled>portfolio</option>
              <option *ngFor="let item of percentageList" [value]="item">
                {{ item }} %
              </option>
            </select>
            <div
              class="text-danger"
              *ngIf="
                !userForm.get('roleManagement.portfolio')!.valid &&
                (userForm.get('roleManagement.portfolio')!.touched ||
                  userForm.get('roleManagement.portfolio')!.dirty)
              "
            >
              <div *ngIf="userForm.get('roleManagement.portfolio')!.errors">
                <small
                  *ngIf="
                    userForm.get('roleManagement.portfolio')!.errors!.required
                  "
                >
                  This field is required
                </small>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3" *ngIf="allFields || onlyManagement">
          <div class="form-group">
            <label for="account">Account</label>
            <select
              class="form-control"
              name="account"
              id="account"
              formControlName="account"
              (change)="
                onSubFieldTotal(
                  'account',
                  userForm.get('roleManagement.account')!.value
                );
                disabledField('management')
              "
            >
              <option value="" selected disabled>account</option>
              <option *ngFor="let item of percentageList" [value]="item">
                {{ item }} %
              </option>
            </select>
            <div
              class="text-danger"
              *ngIf="
                !userForm.get('roleManagement.account')!.valid &&
                (userForm.get('roleManagement.account')!.touched ||
                  userForm.get('roleManagement.account')!.dirty)
              "
            >
              <div *ngIf="userForm.get('roleManagement.account')!.errors">
                <small
                  *ngIf="
                    userForm.get('roleManagement.account')!.errors!.required
                  "
                >
                  This field is required
                </small>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3" *ngIf="allFields || onlyManagement">
          <div class="form-group">
            <label for="project">Project</label>
            <select
              class="form-control"
              name="project"
              id="project"
              formControlName="project"
              (change)="
                onSubFieldTotal(
                  'project',
                  userForm.get('roleManagement.project')!.value
                );
                disabledField('management')
              "
            >
              <option value="" selected disabled>project</option>
              <option *ngFor="let item of percentageList" [value]="item">
                {{ item }} %
              </option>
            </select>
            <div
              class="text-danger"
              *ngIf="
                !userForm.get('roleManagement.project')!.valid &&
                (userForm.get('roleManagement.project')!.touched ||
                  userForm.get('roleManagement.project')!.dirty)
              "
            >
              <div *ngIf="userForm.get('roleManagement.project')!.errors">
                <small
                  *ngIf="
                    userForm.get('roleManagement.project')!.errors!.required
                  "
                >
                  This field is required
                </small>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row" formGroupName="roleTechnical">
        <div class="col-md-3">
          <div class="form-group">
            <label class="form-check-label" for="technicalcheckbox"
              >Technical</label
            >
            <select
              class="form-control"
              name="technical"
              id="technical"
              formControlName="technical"
              (change)="
                onManagementChange(
                  userForm.get('roleTechnical.technical')!.value,
                  'technical'
                );
                getTotalofFields()
              "
            >
              <option value="" selected disabled>technical</option>
              <option *ngFor="let item of percentageList" [value]="item">
                {{ item }} %
              </option>
            </select>
            <div
              class="text-danger"
              *ngIf="
                !userForm.get('roleTechnical.technical')!.valid &&
                (userForm.get('roleTechnical.technical')!.touched ||
                  userForm.get('roleTechnical.technical')!.dirty)
              "
            >
              <div *ngIf="userForm.get('roleTechnical.technical')!.errors">
                <small
                  *ngIf="
                    userForm.get('roleTechnical.technical')!.errors!.required
                  "
                >
                  This field is required
                </small>
              </div>
            </div>
            <div
              class="text-danger"
              *ngIf="
                !userForm.get('roleTechnical.technical')!.valid &&
                (userForm.get('roleTechnical.technical')!.touched ||
                  userForm.get('roleTechnical.technical')!.dirty)
              "
            >
              <div *ngIf="userForm.get('roleTechnical.technical')!.errors">
                <small
                  *ngIf="
                    userForm.get('roleTechnical.technical')!.errors!.required
                  "
                >
                  This field is required
                </small>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3" *ngIf="allFields || onlyTechnical">
          <div class="form-group">
            <label for="architect">Architect</label>
            <select
              class="form-control"
              name="architect"
              id="architect"
              formControlName="architect"
              (change)="
                onSubFieldTotal(
                  'architect',
                  userForm.get('roleTechnical.architect')!.value
                );
                disabledField('technical')
              "
            >
              <option value="" selected disabled>architect</option>
              <option *ngFor="let item of percentageList" [value]="item">
                {{ item }} %
              </option>
            </select>
            <div
              class="text-danger"
              *ngIf="
                !userForm.get('roleTechnical.architect')!.valid &&
                (userForm.get('roleTechnical.architect')!.touched ||
                  userForm.get('roleTechnical.architect')!.dirty)
              "
            >
              <div *ngIf="userForm.get('roleTechnical.architect')!.errors">
                <small
                  *ngIf="
                    userForm.get('roleTechnical.architect')!.errors!.required
                  "
                >
                  This field is required
                </small>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3" *ngIf="allFields || onlyTechnical">
          <div class="form-group">
            <label for="techLead">Tech lead</label>
            <select
              class="form-control"
              name="techLead"
              id="techLead"
              formControlName="techLead"
              (change)="
                onSubFieldTotal(
                  'techLead',
                  userForm.get('roleTechnical.techLead')!.value
                );
                disabledField('technical')
              "
            >
              <option value="" selected disabled>techLead</option>
              <option *ngFor="let item of percentageList" [value]="item">
                {{ item }} %
              </option>
            </select>
            <div
              class="text-danger"
              *ngIf="
                !userForm.get('roleTechnical.techLead')!.valid &&
                (userForm.get('roleTechnical.techLead')!.touched ||
                  userForm.get('roleTechnical.techLead')!.dirty)
              "
            >
              <div *ngIf="userForm.get('roleTechnical.techLead')!.errors">
                <small
                  *ngIf="
                    userForm.get('roleTechnical.techLead')!.errors!.required
                  "
                >
                  This field is required
                </small>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3" *ngIf="allFields || onlyTechnical">
          <div class="form-group">
            <label for="developer">Developer</label>
            <select
              class="form-control"
              name="developer"
              id="developer"
              formControlName="developer"
              (change)="
                onSubFieldTotal(
                  'developer',
                  userForm.get('roleTechnical.developer')!.value
                );
                disabledField('technical')
              "
            >
              <option value="" selected disabled>developer</option>
              <option *ngFor="let item of percentageList" [value]="item">
                {{ item }} %
              </option>
            </select>
            <div
              class="text-danger"
              *ngIf="
                !userForm.get('roleTechnical.developer')!.valid &&
                (userForm.get('roleTechnical.developer')!.touched ||
                  userForm.get('roleTechnical.developer')!.dirty)
              "
            >
              <div *ngIf="userForm.get('roleTechnical.developer')!.errors">
                <small
                  *ngIf="
                    userForm.get('roleTechnical.developer')!.errors!.required
                  "
                >
                  This field is required
                </small>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row" formGroupName="roleFunctional">
        <div class="col-md-3">
          <div class="form-group">
            <label class="form-check-label" for="roleFunctionalcheckbox"
              >Funcational</label
            >
            <select
              class="form-control"
              name="functional"
              id="functional"
              formControlName="functional"
              (change)="
                onManagementChange(
                  userForm.get('roleFunctional.functional')!.value,
                  'functional'
                );
                getTotalofFields()
              "
            >
              <option value="" selected disabled>functional</option>
              <option *ngFor="let item of percentageList" [value]="item">
                {{ item }} %
              </option>
            </select>
            <div
              class="text-danger"
              *ngIf="
                !userForm.get('roleFunctional.functional')!.valid &&
                (userForm.get('roleFunctional.functional')!.touched ||
                  userForm.get('roleFunctional.functional')!.dirty)
              "
            >
              <div *ngIf="userForm.get('roleFunctional.functional')!.errors">
                <small
                  *ngIf="
                    userForm.get('roleFunctional.functional')!.errors!.required
                  "
                >
                  This field is required
                </small>
              </div>
            </div>
            <div
              class="text-danger"
              *ngIf="
                !userForm.get('roleFunctional.functional')!.valid &&
                (userForm.get('roleFunctional.functional')!.touched ||
                  userForm.get('roleFunctional.functional')!.dirty)
              "
            >
              <div *ngIf="userForm.get('roleFunctional.functional')!.errors">
                <small
                  *ngIf="
                    userForm.get('roleFunctional.functional')!.errors!.required
                  "
                >
                  This field is required
                </small>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3" *ngIf="allFields || onlyFunctional">
          <div class="form-group">
            <label for="sme">SME</label>
            <select
              class="form-control"
              name="sme"
              id="sme"
              formControlName="sme"
              (change)="
                onSubFieldTotal(
                  'sme',
                  userForm.get('roleFunctional.sme')!.value
                );
                disabledField('functional')
              "
            >
              <option value="" selected disabled>sme</option>
              <option *ngFor="let item of percentageList" [value]="item">
                {{ item }} %
              </option>
            </select>
            <div
              class="text-danger"
              *ngIf="
                !userForm.get('roleFunctional.sme')!.valid &&
                (userForm.get('roleFunctional.sme')!.touched ||
                  userForm.get('roleFunctional.sme')!.dirty)
              "
            >
              <div *ngIf="userForm.get('roleFunctional.sme')!.errors">
                <small
                  *ngIf="userForm.get('roleFunctional.sme')!.errors!.required"
                >
                  This field is required
                </small>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3" *ngIf="allFields || onlyFunctional">
          <div class="form-group">
            <label for="leadConsultant">Lead consultant</label>
            <select
              class="form-control"
              name="leadConsultant"
              id="leadConsultant"
              formControlName="leadConsultant"
              (change)="
                onSubFieldTotal(
                  'leadConsultant',
                  userForm.get('roleFunctional.leadConsultant')!.value
                );
                disabledField('functional')
              "
            >
              <option value="" selected disabled>lead consultant</option>
              <option *ngFor="let item of percentageList" [value]="item">
                {{ item }} %
              </option>
            </select>
            <div
              class="text-danger"
              *ngIf="
                !userForm.get('roleFunctional.leadConsultant')!.valid &&
                (userForm.get('roleFunctional.leadConsultant')!.touched ||
                  userForm.get('roleFunctional.leadConsultant')!.dirty)
              "
            >
              <div
                *ngIf="userForm.get('roleFunctional.leadConsultant')!.errors"
              >
                <small
                  *ngIf="
                    userForm.get('roleFunctional.leadConsultant')!.errors!
                      .required
                  "
                >
                  This field is required
                </small>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3" *ngIf="allFields || onlyFunctional">
          <div class="form-group">
            <label for="consultant">Consultant</label>
            <select
              class="form-control"
              name="consultant"
              id="consultant"
              formControlName="consultant"
              (change)="
                onSubFieldTotal(
                  'consultant',
                  userForm.get('roleFunctional.consultant')!.value
                );
                disabledField('functional')
              "
            >
              <option value="" selected disabled>consultant</option>
              <option *ngFor="let item of percentageList" [value]="item">
                {{ item }} %
              </option>
            </select>
            <div
              class="text-danger"
              *ngIf="
                !userForm.get('roleFunctional.consultant')!.valid &&
                (userForm.get('roleFunctional.consultant')!.touched ||
                  userForm.get('roleFunctional.consultant')!.dirty)
              "
            >
              <div *ngIf="userForm.get('roleFunctional.consultant')!.errors">
                <small
                  *ngIf="
                    userForm.get('roleFunctional.consultant')!.errors!.required
                  "
                >
                  This field is required
                </small>
              </div>
            </div>
          </div>
        </div>
      </div>
      <hr />
      <div class="rollprofile__action">
        <div class="pr-1">
          <button
            class="job-btn job-btn-outline"
            type="reset"
            [routerLink]="'/profile/experience'"
          >
            Back
          </button>
        </div>
        <div class="pl-1">
          <button
            class="job-btn job-btn-mini"
            [class.disabled]="disabledSubmit || getDisabled() ? true : false"
            type="submit"
            [disabled]="disabledSubmit || getDisabled() ? true : null"
          >
            Next
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
